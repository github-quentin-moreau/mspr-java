<!DOCTYPE html>
<html lang="en">
<head>
	<title>MSPR</title>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">

<!--===============================================================================================-->
	<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" crossorigin="anonymous">
	<link rel="script" href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.min.js">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.3.0/font/bootstrap-icons.css" crossorigin="anonymous">
	<link rel="stylesheet" type="text/css" href="styleAuth.css">
	<link rel="stylesheet" href="style.css">
<!--===============================================================================================-->
<script async src='/cdn-cgi/bm/cv/669835187/api.js'></script></head>
<body>
	
    <!-- Overlay authentification  -->
    <div class="limiter">
        <div class="container-login100">
            <div class="wrap-login100">
                <form class="login100-form validate-form" action="javascript:void(0);">
                    <span class="login100-form-logo">
                        <i class="bi bi-person-circle"></i>
                    </span>
                    <br>
                    <span class="login100-form-title p-b-34 p-t-27">
                        Connexion
                    </span>

                    <br>
                    <div class="wrap-input100 validate-input" data-validate = "Entrer votre identifiant">
                        <input class="input100" type="text" name="mail" id="mail" placeholder="Identifiant">
                        <span class="focus-input100" data-placeholder=""> </span>
                    </div>

                    <div class="wrap-input100 validate-input" data-validate="Entrer votre mot de passe">
                        <input class="input100" type="password" name="pass" id="pass" placeholder="Mot de passe">
                        <span class="focus-input100" data-placeholder=""></span>
                    </div>


                    <div class="container-login100-form-btn">
                        <button class="login100-form-btn"  type="submit" id="submitBtn">
                            Se connecter
                        </button>
                    </div>

                </form>
            </div>
        </div>
    </div>

</body>
</html>   
<!-- Authentification  -->
<script src="https://code.jquery.com/jquery-3.6.0.js" integrity="sha256-H+K7U5CnXl1h5ywQfKtSj8PCmoN9aaq30gDh27Xc0jk=" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js" crossorigin="anonymous"></script>
<script src="main.js"></script>
<script>
    $(document).ready(function() {

        

        var rawUsers = '[{"login":"cberthier","password":"test1"},{"login":"mgontier","password":"test2"},{"login":"smacky","password":"test3"},{"login":"mjackson","password":"test4"},{"login":"rmoreno","password":"test5"},{"login":"bfa","password":"test6"},{"login":"mhollande","password":"test7"},{"login":"palois","password":"test8"}]';
        var users = JSON.parse(rawUsers);
        


        $('#submitBtn').click(function() {


            var mailInput = $('#mail').val();
            var passInput = $('#pass').val();


            if (mailInput == '' && passInput == '') {
                alert('Login et mot de passe vides');
              
            } else if(mailInput == '') {
                alert('Login vide');
            }
            else if(passInput == '') {
                alert('Mot de passe vide');
            }
            else {

                var isAuthentificated = false;

                for (let i = 0; i < users.length; i++) {

                    if (users[i].login == mailInput && users[i].password == passInput) {
                        isAuthentificated = true;
                    }

                }

               if(isAuthentificated == true) { 
                   window.location.replace("./comptes/"+mailInput+"/index.html");
                }  
               else alert('Le mot de passe ou le mail ne sont pas correct.');

            }

            
        
        });
    });
</script>